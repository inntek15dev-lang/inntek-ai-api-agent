# Master Blueprint: AI Agent Integrations (Sincronizado)

## Project Overview
A robust monorepo platform for managing and executing AI tools via official APIs.
- **Backend Port**: 3333
- **Frontend Port**: 5173
- **Primary AI Engine**: Gemini 1.5 Flash (Multimodal)

## Tech Stack
- **Backend**: Node.js (Express 5), Sequelize ORM, MySQL 8 (Aiven Cloud, SSL Required), Multer (File Handling), JWT, Swagger JSDoc.
- **Frontend**: React 18 (Vite), Tailwind CSS, Axios, Lucide Icons.

## Core Modules
1. **Auth**: JWT-based authentication with role/privilege scoping.
2. **AI_Tool_Maker**: Advanced CRUD for AI tools including System Instruction (Context & Behavior) definition.
3. **AI_Tool_Catalog**: Visual repository of available neural units.
4. **AI_Tool_Execution**: Real-time multimodal execution hub (TexStatus: Implementado
4. **AI_Tool_Execution**: Real-time multimodal execution hub (Text, Image, Audio, Video).
- **Status**: Implementado
- **Default Tools**: Validador de CI Chile (Pre-built neural unit).
5. **Config**: Global configuration management (API Keys).
6. **Json_Schemas**: Centralized management of JSON data contracts for strict validation.

## Technical Specifications
### Database Schema (Aiven MySQL: `inntek-ai-api-agent-manager-db`, Port: 26213, SSL: Required)
- `Roles`: Authority levels (`id`, `nombre`).
- `Privilegios`: Granular access control (`id`, `ref_modulo`, `read`, `write`, `exec` (Boolean)).
- `Users`: Auth entities with role association.
- `Tools`: AI Unit configurations (`nombre`, `descripcion`, `logo_herramienta`, `training_prompt`, `behavior_prompt`, `response_format`, `output_format_id`, `json_schema_id`).
- `JsonSchemas`: JSON data contracts (`nombre`, `descripcion`, `schema`).
- `Config`: Key-Value system parameters.

## API Endpoints (Swagger @ `/api-docs`)
### Auth
- `POST /api/auth/login`: Authentication entry point.
- `GET /api/auth/me`: Clearance verification.

### AI Tools
- `GET /api/tools`: Catalog retrieval.
- `POST /api/tools`: Unit creation.
- `GET /api/tools/:id`: Detailed unit data.
- `PUT /api/tools/:id`: Logic adjustment.
- `DELETE /api/tools/:id`: Unit decommissioning.
- `POST /api/tools/:id/execute`: Neural protocol execution. Accepts `multipart/form-data` with `prompt` (text) and `imagen` (file). Chains training + behavior + user prompt. Supports strict schema validation if `json_schema_id` is present.

### Config
- `GET /api/config`: Global parameter retrieval.
- `POST /api/config`: Parameter synchronization.

### Outputs
- `GET /api/output-categories`: List output categories.
- `POST /api/output-categories`: Create output category.
- `GET /api/output-formats`: List output templates.
- `POST /api/output-formats`: Create output template with HTML structure.

### JSON Schemas
- `GET /api/json-schemas`: List all schemas.
- `POST /api/json-schemas`: Create a new schema.
- `GET /api/json-schemas/:id`: Retrieve specific schema.
- `PUT /api/json-schemas/:id`: Update schema definition.
- `DELETE /api/json-schemas/:id`: Remove schema.

## Security (Privilegios Engine)
- **SuperAdmin**: `*` -> `read: true, write: true, exec: true`.
- **Default Port Strategy**: Port 3001 collision avoided by migrating to **3333**.
